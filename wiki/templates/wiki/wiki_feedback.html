{% extends "wiki/wiki_base.html" %}
{% load static %}

{% block extra_head %}
{% endblock %}

{% block content %}
  {{ django_version }}<br>
  {{ request.HTTP_REFERER }}<br>
  <div>
    <form id="formFeedback" method="post" action="{% url 'wiki:feedback' %}">
      {% csrf_token %}
      <!--      {{ form }}-->
      {% for field in form %}
        <div class="fieldWrapper">
          {{ field.errors }}
          {{ field.label_tag }} {{ field }}
          {% if field.help_text %}
            <p class="help">{{ field.help_text|safe }}</p>
          {% endif %}
        </div>
      {% endfor %}
      {% for field in form.visible_fields %}
        {{ field.html_name }}:{{ field.value }}
      {% endfor %}
      <input type="hidden" value="" name="g-recaptcha-response" class="g-recaptcha-response" >
      <input type="submit" value="Saada">
    <!--    <input type="hidden" name="g-recaptcha-response" id='recaptcha'>-->
    </form>

    <form class="need-alert" action="" method="POST">
        <input class="btn btn-danger btn-sm need-alert" type="submit" value="delete">
    </form>
  </div>
  <div>
    {% for key, value in request.items %}
    <small>{{ key }}:{{ value }}</small><br>
    {% endfor %}
  </div>

{% endblock %}

{% block javascript %}
  <script>
    $(document).ready(function() {
      $('.need-alert').on('click', function (event) {

            event.preventDefault();

            //sweetalert2 code
            swal({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, delete it!'
            }).then(function () {

                 //...


         $('.need-alert').submit();

            }).catch(swal.noop);
        })
    });
  </script>
{% endblock %}