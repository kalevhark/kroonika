{% extends "wiki/wiki_base.html" %}
{% load static %}

{% block breadcrumb %}
{% endblock %}

{% block src %}
{% endblock %}

{% block title %}{{ block.super }} - {{ pyhadesoov }}{% endblock %}

{% block css %}
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&display=swap');

    @media screen and (min-width: 1024px) {
      div.image-wrapper {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        -moz-transform: translate(-50%, -50%);
        -ms-transform: translate(-50%, -50%);
        -o-transform: translate(-50%, -50%);
        -webkit-transform: translate(-50%, -50%);
      }
    }

    /* Alla 800px laiuse sätted */
    @media screen and (max-width: 1023px) {
      div.image-wrapper {
        width: 90%;
        display: table;
        margin: 0 auto;
      }
    }

    div.image-wrapper {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      -moz-transform: translate(-50%, -50%);
      -ms-transform: translate(-50%, -50%);
      -o-transform: translate(-50%, -50%);
      -webkit-transform: translate(-50%, -50%);
    }

    .image-wrapper img {
      display: block;
    }

    #divGreeting {
      /* border: solid 0.3em; */
      position: relative;
      left:0;
      top:50%;
      right:0;
      height:50px;
      margin: 0 auto;
      width: 100%;
      /* font-family: 'Just Another Hand', cursive; */
      font-family: 'Mountains of Christmas', cursive;
    }

    .holidays-title {
      font-size: 3em;
      font-weight: bold;
      color: red;
      /* font-family: 'Just Another Hand', cursive; */
      font-family: 'Mountains of Christmas', cursive;
      margin: .5em;
      text-align: center;
      justify-content: center;
    }

    .holidays-title-small {
      font-size: 1.5em;
      color: red;
      /* font-family: 'Just Another Hand', cursive; */
      font-family: 'Mountains of Christmas', cursive;
      margin: .5em;
      text-align: center;
      justify-content: center;
    }

    /*
    J6uluvana
     */
    svg{
        position: absolute;
        left: 50%;
        top: 43%;
        transform: translate(-50%, -50%);
        -moz-transform: translate(-50%, -50%);
        -ms-transform: translate(-50%, -50%);
        -o-transform: translate(-50%, -50%);
        -webkit-transform: translate(-50%, -50%);
    }
    .plane{
      position: relative;
      -webkit-animation: float 3s infinite;
              animation: float 3s infinite;
    }
    @-webkit-keyframes float{
      50%{
        -webkit-transform: translateY(25px);
                transform: translateY(25px);
      }
    }
    @keyframes float{
      50%{
        -webkit-transform: translateY(25px);
                transform: translateY(25px);
      }
    }
    .hand{
      -webkit-transform: rotate(10deg);
          -ms-transform: rotate(10deg);
              transform: rotate(10deg);
      -webkit-animation: wave 1.5s infinite;
              animation: wave 1.5s infinite;
      -webkit-transform-origin: center;
          -ms-transform-origin: center;
              transform-origin: center;
    }
    .blade{
      -webkit-animation:spin 1s infinite linear;
              animation:spin 1s infinite linear;
      -webkit-transform-origin: 50% 54%;
          -ms-transform-origin: 50% 54%;
              transform-origin: 50% 54%;
    }
    @-webkit-keyframes spin{
      100%{
        -webkit-transform: rotateX(360deg);
                transform: rotateX(360deg);
      }
    }
    @keyframes spin{
      100%{
        -webkit-transform: rotateX(360deg);
                transform: rotateX(360deg);
      }
    }
    @-webkit-keyframes wave{
      50%{
        -webkit-transform: rotate(-10deg);
                transform: rotate(-10deg);
      }
    }
    @keyframes wave{
      50%{
        -webkit-transform: rotate(-10deg);
                transform: rotate(-10deg);
      }
    }
  </style>
{% endblock %}

{% block og_image %}
  <meta property="og:image" content="https://valgalinn.ee{% static 'wiki/img/special/Alb 32-27_cr_960x600_icon_j6ul2021_fb.png' %}" />
  <meta property="og:description" content="{{ pyhadesoov }}" />
{% endblock %}

{% block content %}
  <div class="w3-container image-wrapper">
    <div class="holidays-title w3-hide-small w3-hide-medium">
      {{ pyhadesoov }}
    </div>
    <div
        style="color: red; text-align: center; padding-top: 1em"
        class="holidays-title-small w3-hide-large"
    >
      {{ pyhadesoov }}
    </div>
    <img
        src="{% static 'wiki/img/special/Alb 32-27_cr_960x600.png' %}"
        alt="{{ pyhadesoov }}"
        style="width:100%"
    >
    <svg
            data-name="Layer 1"
            xmlns="http://www.w3.org/2000/svg"
            width="350"
            height="400"
    >
      <path fill="transparent" d="M0 0h960v600H0z"/>
      <g fill="#CCE6F4" class="cloud w3-hide-small">
        <path d="M63 53h65a13 13 0 0113 13 13 13 0 01-13 13H61a12 12 0 01-12-12 14 14 0 0114-14z"/>
        <path d="M83 26a19 19 0 0119 19v1a19 19 0 01-19 19h-2a18 18 0 01-18-18v-1a20 20 0 0120-20z"/>
        <path d="M113 38a14 14 0 0114 14v1a14 14 0 01-14 14h-2a13 13 0 01-13-13v-1a15 15 0 0115-15z"/>
      </g>
      <g fill="#CCE6F4" class="cloud w3-hide-small">
        <path d="M202.936 343.907h52.943a10.589 10.589 0 0110.588 10.589 10.589 10.589 0 01-10.588 10.588h-54.572a9.774 9.774 0 01-9.774-9.774 11.403 11.403 0 0111.403-11.403z"/>
        <path d="M219.226 321.916a15.476 15.476 0 0115.476 15.475v.815a15.476 15.476 0 01-15.476 15.475h-1.629a14.661 14.661 0 01-14.661-14.66v-.815a16.29 16.29 0 0116.29-16.29z"/>
        <path d="M243.661 331.69a11.403 11.403 0 0111.403 11.403v.814a11.403 11.403 0 01-11.403 11.403h-1.629a10.589 10.589 0 01-10.588-10.588v-.815a12.218 12.218 0 0112.217-12.217z"/>
      </g>
      <g fill="#CCE6F4" class="cloud w3-hide-small">
        <path d="M12.936 245.907h52.943a10.589 10.589 0 0110.588 10.589 10.589 10.589 0 01-10.588 10.588H11.307a9.774 9.774 0 01-9.774-9.774 11.403 11.403 0 0111.403-11.403z"/>
        <path d="M29.226 223.916a15.476 15.476 0 0115.476 15.475v.815a15.476 15.476 0 01-15.476 15.475h-1.629a14.661 14.661 0 01-14.661-14.66v-.815a16.29 16.29 0 0116.29-16.29z"/>
        <path d="M53.661 233.69a11.403 11.403 0 0111.403 11.403v.814a11.403 11.403 0 01-11.403 11.403h-1.629a10.589 10.589 0 01-10.588-10.588v-.815A12.218 12.218 0 0153.66 233.69z"/>
      </g>
      <g fill="#CCE6F4" class="cloud w3-hide-small">
        <path d="M246.79835,143.07881h75.40328a15.04912,15.04912,0,0,1,15.04912,15.04912v0a15.0491,15.0491,0,0,1-15.0491,15.0491H244.79837a14.04912,14.04912,0,0,1-14.04912-14.04912v0A16.0491,16.0491,0,0,1,246.79835,143.07881Z"/>
        <path d="M269.00509,111.82294h2.04917a21.04912,21.04912,0,0,1,21.04912,21.04912v3.04917a21.04909,21.04909,0,0,1-21.04909,21.04909h-4.04917A20.04912,20.04912,0,0,1,246.956,136.9212V133.872a22.04909,22.04909,0,0,1,22.04909-22.04909Z" />
        <path d="M304.522,125.71444h.47291A16.04912,16.04912,0,0,1,321.044,141.76356v1.47291a16.0491,16.0491,0,0,1-16.0491,16.0491H302.522a15.04912,15.04912,0,0,1-15.04912-15.04912v-1.47291A17.0491,17.0491,0,0,1,304.522,125.71444Z"/>
      </g>
      <g class="plane">
        <rect x="215.747" y="157.738" width="25.511" height="43.645" rx="12.755" ry="12.755" fill="#711723"/>
        <path fill="#f40009" d="M166.263 185.401h74.995v31.965h-74.995zM166.263 217.366h74.995a31.965 31.965 0 01-31.965 31.965h-43.03v-31.965z"/>
        <g class="hand">
        <rect x="136.437" y="152.836" width="26.365" height="9.113" rx="4.557" ry="4.557" transform="rotate(-120 149.62 157.393)" fill="#f6bfb1"/>
        <path fill="#f40009" d="M144.906 163.746l11.978-6.916 20.407 35.346-11.978 6.916z"/>
        <rect x="139.226" y="154.214" width="20.172" height="6.973" rx="3.486" ry="3.486" transform="rotate(-30 149.312 157.7)" fill="#e6e6e6"/>
        </g>
        <path fill="#f6bfb1" d="M171.488 155.28h37.805v23.974h-37.805z"/>
        <path d="M165.956 185.093v64.545h-12.602v-.024c-.406.015-.818.024-1.23.024a32.272 32.272 0 110-64.545c.412 0 .824.01 1.23.025v-.025z" fill="#711723"/>
        <path fill="#300403" d="M161.345 185.093h4.918v64.545h-4.918z"/>
        <path d="M113.376 210.296v11.987h-2.34v-.004a6.053 6.053 0 01-.23.004 5.993 5.993 0 110-11.987c.077 0 .154.002.23.005v-.005z" fill="#f40009"/>
        <g fill="#300403">
        <circle cx="155.505" cy="244.106" r="2.459"/>
        <circle cx="155.505" cy="190.933" r="2.459"/>
        <circle cx="155.505" cy="208.452" r="2.459"/>
        <circle cx="155.505" cy="226.586" r="2.459"/>
        </g>
        <rect class="blade" x="113.244" y="167.266" width="6.762" height="98.354" rx="3.381" ry="3.381" fill="#300403"/>
        <path d="M195.154 211.526h34.732a4.918 4.918 0 014.917 4.918 4.918 4.918 0 01-4.917 4.917h-34.732a4.918 4.918 0 01-4.917-4.917 4.918 4.918 0 014.917-4.918z" fill="#711723"/>
        <g fill="#fff">
        <rect x="174.148" y="171.282" width="15.925" height="40.192" rx="7.963" ry="7.963"/>
        <rect x="188.824" y="171.282" width="15.925" height="40.192" rx="7.963" ry="7.963"/>
        <rect x="180.862" y="167.691" width="15.925" height="51.21" rx="7.963" ry="7.963" transform="rotate(-90 188.824 193.296)"/>
        <path d="M161.55 180.896a7.963 7.963 0 016.42-9.252l20.066-3.625a7.963 7.963 0 019.251 6.42 7.963 7.963 0 01-6.42 9.251l-20.066 3.626a7.963 7.963 0 01-9.251-6.42z"/>
        <path d="M183.122 174.543a7.963 7.963 0 019.251-6.42l19.491 3.521a7.963 7.963 0 016.42 9.252 7.963 7.963 0 01-9.251 6.42l-19.491-3.522a7.963 7.963 0 01-6.42-9.25z"/>
        </g>
        <rect x="167.185" y="151.899" width="6.455" height="27.355" rx="3.227" ry="3.227" fill="#711723"/>
        <rect x="207.449" y="151.899" width="6.455" height="27.355" rx="3.227" ry="3.227" fill="#711723"/>
        <circle cx="190.083" cy="165.883" r="3.842" fill="#e76160"/>
        <circle cx="190.083" cy="179.868" r="6.454"/>
        <path fill="#f40009" d="M167.185 148.21h46.718v7.069h-46.718zM213.903 145.137h-46.718a10.757 10.757 0 0110.757-10.758h25.204a10.757 10.757 0 0110.757 10.758z"/>
        <path fill="#711723" d="M167.185 143.907h46.718v4.303h-46.718z"/>
        <circle cx="181.016" cy="146.059" r="7.377" fill="#711723"/>
        <circle cx="181.016" cy="146.059" r="5.62" fill="#300403"/>
        <circle cx="200.072" cy="146.059" r="7.377" fill="#711723"/>
        <circle cx="200.072" cy="146.059" r="5.62" fill="#300403"/>
        <path d="M176.713 165.422s2.459-3.995 6.454 0M197.306 165.422s2.459-3.995 6.454 0" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.844"/>
      </g>
	  </svg>
    <p
        style="font-family: 'Mountains of Christmas', cursive;"
        id="txtHolder"
        class="w3-hide-large"
    >
    </p>

    <p style="text-align: center;">
      <small>
        Valga linna vaade 1928. aastast 600 m kõrguselt linnapargi kohalt kesklinna poole (EKLA, Alb.-32:27)
      </small>
    </p>
    <div class="w3-tiny">
      Oma nimega jõulukaardi saatmiseks kasutage aadressi: https://valgalinn.ee/j6ul2021/?<i>minginimi</i> NB! Küsimärk peab olema!
    </div>
    <div
        class="fb-share-button"
        data-href="{% url 'special_j6ul2021' %}"
        data-layout="button"
        data-size="small">
      <a
          target="_blank"
          href="https://www.facebook.com/sharer/sharer.php?u={% url 'special_j6ul2021' %}%2F&amp;src=sdkpreparse"
          class="fb-xfbml-parse-ignore">Jaga
      </a>
    </div>
    <div id="divGreeting" class="w3-hide-small w3-hide-medium">
      <canvas
              id="canvasGreeting"
              width=500
              height=100
              style="position: relative; top: -200px; left: 30px;"
      >
      </canvas>
    </div>
  </div>
{% endblock %}

{% block javascript %}
  <script>
    $(document).ready(function() {
      showGreeting();
    });

    function showGreeting() {
      // get 2D context
      var ctxGreeting = document.getElementById("canvasGreeting").getContext("2d"),

      // the text we will draw
      txt = decodeURIComponent("Soovib: {{tervitaja}}".replace("amp;", "")),

      // dash-length for off-range
      dashLen = 220,

      // we'll update this, initialize
      dashOffset = dashLen,

      // some arbitrary speed
      speed = 10,

      // start position for x and iterator
      x = 0, i = 0;

      // Kohendame tervitusvälja akna suurusele vastavaks
      // let elCanvasWindow = document.getElementById("canvasWindow");
      // console.log(elCanvasWindow.clientWidth);
      // let elCanvasGreeting = document.getElementById("canvasGreeting");
      // elCanvasGreeting.style.width = (elCanvasWindow.clientWidth - 80) + "px";

      // text mobiiliseadmete jaoks
      document.getElementById("txtHolder").innerHTML = txt;
      // elCanvasGreeting.innerHTML = txt;

      // Comic Sans?? Let's make it useful for something ;) w/ fallbacks
      // ctxGreeting.font = "30px Just Another Hand";
      ctxGreeting.font = "48px Mountains of Christmas";

      // thickness of the line
      ctxGreeting.lineWidth = 2;

      // to avoid spikes we can join each line with a round joint
      //ctxGreeting.lineJoin = "round";

      // increase realism letting background (f.ex. paper) show through
      ctxGreeting.globalAlpha = 2/3;

      // some color, lets use a black pencil
      ctxGreeting.strokeStyle = "white";
      ctxGreeting.fillStyle = "white";

      ctxGreeting.shadowColor = "white";

      // loop(ctxGreeting, txt, x, dashLen, dashOffset, speed, i);
      (function loop() {
          // clear canvas for each frame
          ctxGreeting.clearRect(x, 0, 60, 150);

          // calculate and set current line-dash for this char
          ctxGreeting.setLineDash([dashLen - dashOffset, dashOffset - speed]);

          // reduce length of off-dash
          dashOffset -= speed;

          // draw char to canvas with current dash-length
          ctxGreeting.strokeText(txt[i], x, 80);

          // char done? no, the loop
          if (dashOffset > 0) requestAnimationFrame(loop);
          else {

            // ok, outline done, lets fill its interior before next
            ctxGreeting.fillText(txt[i], x, 80);

            // reset line-dash length
            dashOffset = dashLen;

            // get x position to next char by measuring what we have drawn
            // notice we offset it a little by random to increase realism
            x += ctxGreeting.measureText(txt[i++]).width + ctxGreeting.lineWidth * Math.random();

            // lets use an absolute transform to randomize y-position a little
            ctxGreeting.setTransform(1, 0, 0, 1, 0, 3 * Math.random());

            // and just cause we can, rotate it a little too to make it even
            // more realistic
            ctxGreeting.rotate(Math.random() * 0.005);

            // if we still have chars left, loop animation again for this char
            if (i < txt.length) requestAnimationFrame(loop);
          }
        })();  // just to self-invoke the loop

    };
    </script>
{% endblock %}