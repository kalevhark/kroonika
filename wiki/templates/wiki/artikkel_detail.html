{% extends "wiki/wiki_base.html" %}

{% block title %}{{ block.super }} - {{ artikkel.headline }}{% endblock %}

{% block breadcrumb %}
{% endblock %}

{% block css %}
<style>
/* Style the Image Used to Trigger the Modal */
#myImg {
  border-radius: 5px;
  cursor: pointer;
  transition: 0.3s;
}

#myImg:hover {opacity: 0.7;}

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
}

/* Modal Content (Image) */
.modal-content {
  margin: auto;
  display: block;
  width: 80%;
  max-width: 700px;
}

/* Caption of Modal Image (Image Text) - Same Width as the Image */
#caption {
  margin: auto;
  display: block;
  width: 80%;
  max-width: 700px;
  text-align: center;
  color: #ccc;
  padding: 10px 0;
  height: 150px;
}

/* Add Animation - Zoom in the Modal */
.modal-content, #caption {
  animation-name: zoom;
  animation-duration: 0.6s;
}

@keyframes zoom {
  from {transform:scale(0)}
  to {transform:scale(1)}
}

/* The Close Button */
.close {
  position: absolute;
  top: 15px;
  right: 35px;
  color: #f1f1f1;
  font-size: 40px;
  font-weight: bold;
  transition: 0.3s;
}

.close:hover,
.close:focus {
  color: #bbb;
  text-decoration: none;
  cursor: pointer;
}

/* 100% Image Width on Smaller Screens */
@media only screen and (max-width: 700px){
  .modal-content {
    width: 100%;
  }
}
</style>
{% endblock %}

{% block content %}
{% load widget_tweaks %}

<div class="w3-cell-row w3-container w3-padding-16">

	<!-- Kronoloogiliselt eelnev artikkel -->
  <div class="w3-container w3-cell w3-cell-middle">
		{% if prev_obj %}
			{% include 'wiki/includes/kp.html' with sd=prev_obj.hist_date ed=prev_obj.hist_enddate y=prev_obj.hist_year m=prev_obj.hist_month cs="dark" %}
			<br>
			<a class="hover-artikkel" href={% url 'wiki:wiki_artikkel_detail' pk=prev_obj.id %}>
				<i class="fa fa-angle-left"></i>&nbsp;{{ prev_obj.headline }}
			</a>
		{% endif %}
  </div>

  <!-- Kronoloogiliselt järgnev artikkel -->
  <div class="w3-container w3-right-align w3-cell w3-cell-middle">
		{% if next_obj %}
		{% include 'wiki/includes/kp.html' with sd=next_obj.hist_date ed=next_obj.hist_enddate y=next_obj.hist_year m=next_obj.hist_month cs="dark" %}
			<br>
		<a class="hover-artikkel" href={% url 'wiki:wiki_artikkel_detail' pk=next_obj.id %}>
			{{ next_obj.headline }}&nbsp;<i class="fa fa-angle-right"></i>
		</a>
		{% endif %}
  </div>
</div>

<div class="w3-panel w3-card-4 w3-light-grey" >
  <div class="w3-row w3-padding-16 w3-xlarge text-artikkel">
    <i class="fa fa-comment">	</i>
		{% include 'wiki/includes/kp.html' with sd=object.hist_date ed=object.hist_enddate y=object.hist_year m=object.hist_month cs="white" %}
  </div>
  <div class="w3-twothird w3-padding" >
    <!-- Artikkel -->
		<div>
			{% include 'wiki/includes/object_detail_pilt.html' with cls='pilt-postkaart-medium' %}
<!--      <div class="w3-third">-->
<!--	    {% if profiilipilt %} &lt;!&ndash; Kui on määratud profiilipilt &ndash;&gt;-->
<!--			  <div class="w3-margin-right">-->
<!--		  	  <img class="pilt-postkaart-medium" id="profiiliPilt" src="{{ profiilipilt.link }}"/>-->
<!--	      	  <small><div class="w3-center" id="imgtext">{{ profiilipilt }}</div></small>-->
<!--		  	</div>-->
<!--			{% else %} &lt;!&ndash; Seotud piltide ankur &ndash;&gt;-->
<!--		  	<div class="w3-margin-right" style="display: none">-->
<!--		    	<img id="profiiliPilt" src="" style="max-width:100%"/>-->
<!--	        	<small><div class="w3-center" id="imgtext"></div></small>-->
<!--		  	</div>-->
<!--			{% endif %}-->
<!--	  	</div>-->
			<div class="w3-twothird">
				{% include 'wiki/includes/vigane.html' %}
				<div>
						{{ object.body_text | safe | linebreaksbr }}
				</div>
				{% include 'wiki/includes/seotud_viited.html' %}
			</div>
    </div>
  </div>
	<div class="w3-third" >
		{% include 'wiki/includes/seotud_isikud.html' %}
		{% include 'wiki/includes/seotud_organisatsioonid.html' %}
		{% include 'wiki/includes/seotud_objektid.html' %}
		{% include 'wiki/includes/seotud_pildid.html' %}
	</div>
</div>
{% include 'wiki/includes/object_updated_edit.html' with model='artikkel' %}

{% endblock %}

{% block javascript %}
<script>
// Get the modal
var modal = document.getElementById("myModal");

// Get the image and insert it inside the modal - use its "alt" text as a caption
var img = document.getElementById("profiiliPilt");
var modalImg = document.getElementById("img01");
var captionText = document.getElementById("imgtext");
img.onclick = function(){
  modal.style.display = "block";
  modalImg.src = this.src;
  captionText.innerHTML = this.alt;
}

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}
</script>
{% endblock %}